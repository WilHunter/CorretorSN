import{Q,C as P}from"./ClosePopup.6b563c98.js";import{ar as T,r as m,o as U,V as s,ap as c,Z as o,f as r,X as h,Y as S,$ as v,aD as k,W as V,m as A,F as E,aq as q,M as D,a1 as B,a2 as O}from"./index.7c46ebd4.js";import{Q as j}from"./QForm.18670f90.js";import{Q as L}from"./QSpinnerBars.58a4c0ac.js";import{Q as z,a as R}from"./QSpinnerCube.f2d999e7.js";import{Q as W}from"./QInput.c83e1a6c.js";import{a as I,Q as x}from"./QCard.f5db9f71.js";import{a as H}from"./QCardActions.b43c9cb6.js";import{a as J}from"./axios.bf56c3c5.js";import{_ as Y}from"./plugin-vue_export-helper.e4a8a083.js";import"./use-prevent-scroll.5fcfcee8.js";const K="89180c87ecdf4d6aaa7d23a3fd099b16",X="https://ath-gpt4-o-dev.openai.azure.com/openai/deployments/gpt-4o-std-240513/chat/completions?api-version=2024-02-15-preview",Z=T("vestStore",()=>{const i=m(null),d=m([]),p=m(!1),e=m("");return{vestibulares:i,simulado:d,error:p,errorMessage:e,gerarSimulado:async(b,a)=>{var t,u;try{const g={messages:[{role:"user",content:`Gerar simulado completo para o vestibular: ${b} com 8 quest\xF5es alternativas e de anos e n\xEDveis aleat\xF3rios, retornando um json com a seguinte estrutura: 
            simulado:{
              n\xFAmero da quest\xE3o;
              Ano de referencia: (Ex: ITA-2023);
              pergunta;
              alternativas: [];
              resposta correta;
              coment\xE1rio da resposta correta;
            };
            *importante, gere o total de quest\xF5es solicitadas, sem interrup\xE7\xE3o e retorne somente o json, sem mais coment\xE1rios`}],max_tokens:4e3},w=await J.post(X,g,{headers:{"Content-Type":"application/json","api-key":K}});let y;try{y=JSON.parse(w.data.choices[0].message.content)}catch{throw new Error("A resposta da API n\xE3o \xE9 um JSON v\xE1lido: "+w.data.choices[0].message.content)}if(Array.isArray(y.simulado))d.value=y.simulado.map(_=>({numero:_["n\xFAmero da quest\xE3o"],ano:_["Ano de referencia"],pergunta:_.pergunta,alternativas:_.alternativas,resposta:_["resposta correta"]}));else throw new Error("A resposta da API n\xE3o cont\xE9m um array 'simulado'")}catch(g){e.value=`C\xF3digo: ${((t=g.response)==null?void 0:t.status)||""}
Mensagem: ${((u=g.response)==null?void 0:u.statusText)||g.message}`,p.value=!0}}}});const $={setup(){const i=Z(),d=m(null),p=m([]),e=m([]),C=m([]),b=m(!1),a=m(!1),t=m(!1),u=m(null),g=[{label:"ENEM",value:"ENEM"},{label:"ITA",value:"ITA"},{label:"AFA",value:"AFA"},{label:"IME",value:"IME"},{label:"Fuvest",value:"Fuvest"},{label:"Unicamp",value:"Unicamp"}],w={ENEM:180,ITA:70,AFA:64,IME:80,Fuvest:90,Unicamp:72},y=async()=>{a.value=!0,t.value=!1,setTimeout(()=>{t.value=!0},6e4);const l=w[d.value];await i.gerarSimulado(d.value,l),p.value=i.simulado,e.value=Array(l).fill(null),a.value=!1},_=()=>{let l=0;p.value.forEach((n,N)=>{e.value[N]===n.resposta&&l++}),u.value=l,b.value=!0},G=(l,n)=>b.value?e.value[l]===n?n===p.value[l].resposta?"cyan":"red":n===p.value[l].resposta?"cyan":null:null,M=()=>{const l=document.querySelector(".simuladoPrint").innerHTML,n=window.open("","","width=800,height=600");n.document.write(`
          <html>
            <head>
              <title>Imprimir Simulado</title>
            </head>
            <body>
              ${l}
            </body>
          </html>
        `),n.document.close(),n.print()},F=()=>{const l=document.querySelector(".gabaritoPrint").innerHTML,n=window.open("","","width=800,height=600");n.document.write(`
          <html>
            <head>
              <title>Imprimir Gabarito</title>
            </head>
            <body>
              ${l}
            </body>
          </html>
        `),n.document.close(),n.print()};return U(()=>{d.value=i.vestibulares,p.value=i.simulado}),{vestibulares:d,simulado:p,respostas:e,respostasDissertativas:C,mostrarGabarito:b,loading:a,showAlternativeSpinner:t,options:g,gerarSimulado:y,corrigirSimulado:_,imprimirSimulado:M,imprimirGabarito:F,acertos:u,getOptionColor:G}}},f=i=>(B("data-v-24d9e1e6"),i=i(),O(),i),ee={class:"register-page"},ae=f(()=>o("h3",null,"Gerador de Simulados",-1)),oe=f(()=>o("br",null,null,-1)),te=f(()=>o("span",null,"Selecione a prova que deseja:",-1)),se={class:"charts-container text-center"},re={key:0},le={class:"result-container q-mt-xl"},ne={class:"simuladoAcao"},ie={key:0,class:"text-center"},de={key:0},ue=f(()=>o("div",{class:"text-h4"},"Aguarde mais um pouco, est\xE1 quase pronto",-1)),ce={key:1},me=f(()=>o("div",{class:"text-h4"},"Gerando o simulado...",-1)),pe={key:1},ve={class:"simuladoPrint"},_e={key:0,class:"alternativas"},he={key:1},ge=f(()=>o("h5",null,"Gabarito",-1)),be={key:0},fe={class:"q-mt-md"};function ye(i,d,p,e,C,b){return s(),c("div",ee,[ae,oe,te,o("div",se,[r(j,null,{default:h(()=>[r(Q,{modelValue:e.vestibulares,"onUpdate:modelValue":d[0]||(d[0]=a=>e.vestibulares=a),options:e.options,type:"radio",class:"q-mb-xl",inline:""},null,8,["modelValue","options"]),r(A,{dense:"",class:"q-mr-md q-mb-xl",style:{width:"6em"},onClick:e.gerarSimulado,label:"Gerar",color:"primary"},null,8,["onClick"])]),_:1})]),e.simulado.length>0?(s(),c("h5",re,[S("Simulado "),o("b",null,v(e.vestibulares),1),S(":")])):k("",!0),o("div",le,[o("div",ne,[e.simulado.length>0?(s(),V(A,{key:0,dense:"",outline:"",class:"q-mb-xl q-mr-md",onClick:e.corrigirSimulado,label:"Corrigir Simulado",color:"primary"},null,8,["onClick"])):k("",!0),e.simulado.length>0?(s(),V(A,{key:1,dense:"",outline:"",class:"q-mb-xl",onClick:e.imprimirSimulado,label:"Imprimir Simulado",color:"secondary"},null,8,["onClick"])):k("",!0)]),e.loading?(s(),c("div",ie,[e.showAlternativeSpinner?(s(),c("div",de,[ue,r(L,{class:"q-mt-md",size:"3em",color:"indigo"})])):(s(),c("div",ce,[me,r(z,{class:"q-mt-md",size:"3em",color:"indigo"})]))])):e.simulado.length>0?(s(),c("div",pe,[o("div",ve,[(s(!0),c(E,null,q(e.simulado,(a,t)=>(s(),V(x,{key:t,class:"q-ma-md",style:{"background-color":"transparent"}},{default:h(()=>[r(I,null,{default:h(()=>[o("div",null,[o("b",null,v(a.numero)+". ("+v(a.ano)+")",1),S(" "+v(a.pergunta),1)]),a.alternativas?(s(),c("div",_e,[r(Q,{modelValue:e.respostas[t],"onUpdate:modelValue":u=>e.respostas[t]=u,options:a.alternativas.map(u=>({label:u,value:u})),type:"radio",color:e.getOptionColor(t,i.alt)},null,8,["modelValue","onUpdate:modelValue","options","color"])])):(s(),c("div",he,[r(W,{filled:"",modelValue:e.respostasDissertativas[t],"onUpdate:modelValue":u=>e.respostasDissertativas[t]=u,type:"textarea",rows:"5"},null,8,["modelValue","onUpdate:modelValue"])]))]),_:2},1024)]),_:2},1024))),128))])])):k("",!0)]),r(R,{modelValue:e.mostrarGabarito,"onUpdate:modelValue":d[1]||(d[1]=a=>e.mostrarGabarito=a)},{default:h(()=>[r(x,{class:"gabaritoPrint",style:{"background-color":"#0E2741",color:"#0086f3"}},{default:h(()=>[r(I,{class:"text-center"},{default:h(()=>[ge,e.acertos!==null?(s(),c("div",be,"Voc\xEA acertou "+v(e.acertos)+" de "+v(e.simulado.length)+" quest\xF5es (Nota: "+v((e.acertos/e.simulado.length*10).toFixed(1))+")",1)):k("",!0)]),_:1}),r(I,null,{default:h(()=>[(s(!0),c(E,null,q(e.simulado,(a,t)=>(s(),c("div",{key:t},[o("div",fe,[o("b",null,v(a.numero)+".",1),S(" "+v(a.pergunta),1)]),o("div",null,[S("Resposta correta: "),o("b",null,v(a.resposta),1)])]))),128))]),_:1}),r(H,{align:"right"},{default:h(()=>[D(r(A,{flat:"",label:"Fechar"},null,512),[[P]]),r(A,{flat:"",label:"Imprimir Gabarito",onClick:e.imprimirGabarito},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Ge=Y($,[["render",ye],["__scopeId","data-v-24d9e1e6"]]);export{Ge as default};
