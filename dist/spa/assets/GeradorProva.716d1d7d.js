import{Q as q}from"./QSelect.15477bdc.js";import{Q as G,C as L}from"./ClosePopup.2a77641c.js";import{Q as J}from"./QInput.c3b6b411.js";import{ar as R,r as u,S as W,aM as Y,V as m,ap as p,f as t,aD as E,W as S,m as C,Z as l,F as O,aq as I,X as h,Y as Q,$ as g,M as K,a1 as X,a2 as Z}from"./index.31ee3d3b.js";import{Q as $}from"./QSpinnerBars.92bd00f1.js";import{Q as ee,a as ae}from"./QSpinnerCube.d86f3381.js";import{Q as oe}from"./QChip.604d90e6.js";import{a as V,Q as B}from"./QCard.427c9c87.js";import{a as le}from"./QCardActions.52b7b8b8.js";import{a as te}from"./axios.bf56c3c5.js";import{_ as se}from"./plugin-vue_export-helper.b4be3b85.js";import"./QItem.1809a241.js";import"./QItemLabel.041cfbbc.js";import"./format.7e1e4078.js";import"./use-prevent-scroll.2c114674.js";const re="89180c87ecdf4d6aaa7d23a3fd099b16",ne="https://ath-gpt4-o-dev.openai.azure.com/openai/deployments/gpt-4o-std-240513/chat/completions?api-version=2024-02-15-preview",ie=R("provaStore",{state:()=>({prova:[],errorMessage:"",error:!1}),actions:{async gerarProva(d,s,f,e){var b,_;try{const a={messages:[{role:"user",content:`Gere uma prova para alunos da ${d}, da disciplina ${s} com ${e} quest\xF5es alternativas de n\xEDvel ${f}. A resposta deve conter somente o JSON com a seguinte estrutura:
              {
                "prova": [
                  {
                    "n\xFAmero da quest\xE3o": n\xFAmero,
                    "c\xF3digo BNCC": ["c\xF3digo"],
                    "pergunta": "pergunta",
                    "alternativas": ["A) alternativa", "B) alternativa", "C) alternativa", "D) alternativa"],
                    "resposta correta": "letra",
                    "coment\xE1rio da resposta correta": "coment\xE1rio"
                  }
                ]
              }
              *importante, gere o total de quest\xF5es solicitadas, sem interrup\xE7\xE3o e retorne somente o json, sem mais coment\xE1rios`}],max_tokens:4e3},c=await te.post(ne,a,{headers:{"Content-Type":"application/json","api-key":re}});console.log(c);let r;try{const y=c.data.choices[0].message.content.replace(/```json/g,"").replace(/```/g,"").trim();r=JSON.parse(y)}catch{throw new Error("A resposta da API n\xE3o \xE9 um JSON v\xE1lido: "+c.data.choices[0].message.content)}if(console.log(r),Array.isArray(r.prova))this.prova=r.prova.map(n=>({numero:n["n\xFAmero da quest\xE3o"],codigoBNCC:n["c\xF3digo BNCC"],pergunta:n.pergunta,alternativas:n.alternativas,resposta:n["resposta correta"],comentario:n["coment\xE1rio da resposta correta"]})),console.log(this.prova);else throw new Error("A resposta da API n\xE3o cont\xE9m um array 'prova'")}catch(a){this.errorMessage=`C\xF3digo: ${((b=a.response)==null?void 0:b.status)||""}
Mensagem: ${((_=a.response)==null?void 0:_.statusText)||a.message}`,this.error=!0}}}});const de={setup(){const d=ie(),s=u(null),f=u(null),e=u(null),b=u(10),_=u([]),a=u(!1),c=u([]),r=u(!1),n=u(!1),y=u(0),w=u(0),M=W({materiasOptions:[]}),N=[{label:"1\xBA Ano do Ensino Fundamental",value:"1EF"},{label:"2\xBA Ano do Ensino Fundamental",value:"2EF"},{label:"3\xBA Ano do Ensino Fundamental",value:"3EF"},{label:"4\xBA Ano do Ensino Fundamental",value:"4EF"},{label:"5\xBA Ano do Ensino Fundamental",value:"5EF"},{label:"6\xBA Ano do Ensino Fundamental",value:"6EF"},{label:"7\xBA Ano do Ensino Fundamental",value:"7EF"},{label:"8\xBA Ano do Ensino Fundamental",value:"8EF"},{label:"9\xBA Ano do Ensino Fundamental",value:"9EF"},{label:"1\xBA Ano do Ensino M\xE9dio",value:"1EM"},{label:"2\xBA Ano do Ensino M\xE9dio",value:"2EM"},{label:"3\xBA Ano do Ensino M\xE9dio",value:"3EM"}],D=[{label:"F\xE1cil",value:"F\xE1cil"},{label:"M\xE9dio",value:"M\xE9dio"},{label:"Dif\xEDcil",value:"Dif\xEDcil"},{label:"Aleat\xF3rio",value:"Aleat\xF3rio"}],F=u([]),U=i=>{console.log("S\xE9rie selecionada:",i.value),f.value=null;let o=[];switch(i.value){case"1EF":o=[{label:"Matem\xE1tica",value:"Matem\xE1tica"},{label:"Portugu\xEAs",value:"Portugu\xEAs"}];break;case"2EF":o=[{label:"Matem\xE1tica",value:"Matem\xE1tica"},{label:"Portugu\xEAs",value:"Portugu\xEAs"},{label:"Ci\xEAncias",value:"Ci\xEAncias"}];break;case"3EF":case"4EF":case"5EF":o=[{label:"Matem\xE1tica",value:"Matem\xE1tica"},{label:"Portugu\xEAs",value:"Portugu\xEAs"},{label:"Ci\xEAncias",value:"Ci\xEAncias"},{label:"Geografia",value:"Geografia"},{label:"Hist\xF3ria",value:"Hist\xF3ria"}];break;case"6EF":case"7EF":case"8EF":case"9EF":o=[{label:"Matem\xE1tica",value:"Matem\xE1tica"},{label:"Portugu\xEAs",value:"Portugu\xEAs"},{label:"Ci\xEAncias",value:"Ci\xEAncias"},{label:"Geografia",value:"Geografia"},{label:"Hist\xF3ria",value:"Hist\xF3ria"},{label:"Artes",value:"Artes"},{label:"Educa\xE7\xE3o F\xEDsica",value:"Educa\xE7\xE3o F\xEDsica"}];break;case"1EM":case"2EM":case"3EM":o=[{label:"Matem\xE1tica",value:"Matem\xE1tica"},{label:"Portugu\xEAs",value:"Portugu\xEAs"},{label:"F\xEDsica",value:"F\xEDsica"},{label:"Qu\xEDmica",value:"Qu\xEDmica"},{label:"Biologia",value:"Biologia"},{label:"Geografia",value:"Geografia"},{label:"Hist\xF3ria",value:"Hist\xF3ria"},{label:"Filosofia",value:"Filosofia"},{label:"Sociologia",value:"Sociologia"},{label:"Ingl\xEAs",value:"Ingl\xEAs"},{label:"Espanhol",value:"Espanhol"}];break;default:o=[]}M.materiasOptions=o,console.log("Mat\xE9rias dispon\xEDveis:",M.materiasOptions)},H=async()=>{var A,k;const i=((A=s.value)==null?void 0:A.value)||"",o=((k=f.value)==null?void 0:k.value)||"";console.log(i,o,e.value,b.value),r.value=!0,n.value=!1,setTimeout(()=>{r.value&&(n.value=!0)},5e3),await d.gerarProva(i,o,e.value,b.value),F.value=d.prova,_.value=Array(b.value).fill(null),r.value=!1,n.value=!1},T=()=>{let i=0;c.value=F.value.map((o,A)=>{const k=_.value[A],x=o.resposta,P=k===x;return P&&i++,{numero:o.numero,resposta:x,erro:!P,comentario:P?"":o.comentario}}),y.value=i,w.value=i/F.value.length*10,a.value=!0},j=()=>{const i=document.querySelector(".q-dialog .q-card").innerHTML,o=window.open("","","width=800,height=600");o.document.write(`
        <html>
          <head>
            <title>Imprimir Gabarito</title>
          </head>
          <body>
            ${i}
          </body>
        </html>
      `),o.document.close(),o.print()},z=()=>{const i=document.querySelector(".provaPrint").innerHTML,o=window.open("","","width=800,height=600");o.document.write(`
        <html>
          <head>
            <title>Imprimir Prova</title>
          </head>
          <body>
            ${i}
          </body>
        </html>
      `),o.document.close(),o.print()};return{serie:s,materia:f,nivel:e,quantidadeQuestoes:b,seriesOptions:N,...Y(M),nivelOptions:D,prova:F,respostas:_,gerarProva:H,corrigirProva:T,imprimirProva:z,imprimirGabarito:j,isDialogOpen:a,gabarito:c,loading:r,showAlternativeSpinner:n,acertos:y,nota:w,onSerieChange:U}}},v=d=>(X("data-v-7fe66918"),d=d(),Z(),d),ce={class:"register-page"},ue=v(()=>l("h3",null,"Gerador de Provas",-1)),me=v(()=>l("br",null,null,-1)),ve=v(()=>l("span",null,"Selecione a s\xE9rie do aluno:",-1)),pe={key:0},ge=v(()=>l("span",null,"Escolha um n\xEDvel:",-1)),be=v(()=>l("span",null,"Quantidade de quest\xF5es:",-1)),he={key:2,class:"text-center"},_e={key:0},fe=v(()=>l("div",{class:"text-h4"},"Aguarde mais um pouco, est\xE1 quase pronto",-1)),Ee={key:1},Ce=v(()=>l("div",{class:"text-h4"},"Gerando o simulado...",-1)),ye={key:3},Fe={class:"simuladoAcao"},Ae={class:"provaPrint"},ke=v(()=>l("b",null,"BNCC:",-1)),Me=v(()=>l("div",{class:"text-h5"},"Gabarito",-1)),Pe={class:"text-subtitle1"},Se={class:"text-subtitle1"},Qe={key:0},Ve=v(()=>l("b",null,"Coment\xE1rio:",-1));function we(d,s,f,e,b,_){return m(),p("div",ce,[ue,me,ve,t(q,{modelValue:e.serie,"onUpdate:modelValue":[s[0]||(s[0]=a=>e.serie=a),e.onSerieChange],options:e.seriesOptions,label:"S\xE9rie",class:"q-mt-md q-mb-xl",outlined:"",dark:"",dense:""},null,8,["modelValue","options","onUpdate:modelValue"]),d.materiasOptions.length>0?(m(),p("span",pe,"Selecione a mat\xE9ria:")):E("",!0),d.materiasOptions.length>0?(m(),S(q,{key:1,modelValue:e.materia,"onUpdate:modelValue":s[1]||(s[1]=a=>e.materia=a),options:d.materiasOptions,label:"Mat\xE9ria",class:"q-mt-md q-mb-xl",outlined:"",dark:"",dense:""},null,8,["modelValue","options"])):E("",!0),ge,t(G,{modelValue:e.nivel,"onUpdate:modelValue":s[2]||(s[2]=a=>e.nivel=a),options:e.nivelOptions,type:"radio",class:"q-mt-md q-mb-xl",inline:""},null,8,["modelValue","options"]),be,t(J,{modelValue:e.quantidadeQuestoes,"onUpdate:modelValue":s[3]||(s[3]=a=>e.quantidadeQuestoes=a),type:"number",class:"q-mt-md q-mb-xl",label:"Quantidade de Quest\xF5es",outlined:"",dark:"",dense:""},null,8,["modelValue"]),t(C,{dense:"",class:"q-mb-xl",style:{width:"6em"},onClick:e.gerarProva,label:"Gerar",color:"primary"},null,8,["onClick"]),e.loading?(m(),p("div",he,[e.showAlternativeSpinner?(m(),p("div",_e,[fe,t($,{class:"q-mt-md",size:"3em",color:"indigo"})])):(m(),p("div",Ee,[Ce,t(ee,{class:"q-mt-md",size:"3em",color:"indigo"})]))])):E("",!0),e.prova.length>0&&!e.loading?(m(),p("div",ye,[l("div",Fe,[t(C,{dense:"",outline:"",class:"q-mb-xl q-mr-md",onClick:e.corrigirProva,label:"Corrigir",color:"primary"},null,8,["onClick"]),t(C,{dense:"",outline:"",class:"q-mb-xl",onClick:e.imprimirProva,label:"Imprimir",color:"secondary"},null,8,["onClick"])]),l("div",Ae,[(m(!0),p(O,null,I(e.prova,(a,c)=>(m(),S(B,{key:c,class:"q-ma-md",style:{"background-color":"transparent"}},{default:h(()=>[t(V,null,{default:h(()=>[t(oe,{class:"q-mt-md q-mb-md",dense:"",outline:"",color:"primary",size:"md"},{default:h(()=>[ke,Q(" "+g(a.codigoBNCC.join(", ")),1)]),_:2},1024),l("div",null,[l("b",null,g(a.numero)+".",1),Q(" "+g(a.pergunta),1)]),t(G,{modelValue:e.respostas[c],"onUpdate:modelValue":r=>e.respostas[c]=r,options:a.alternativas.map(r=>({label:r,value:r})),type:"radio"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)]),_:2},1024))),128))])])):E("",!0),t(ae,{modelValue:e.isDialogOpen,"onUpdate:modelValue":s[4]||(s[4]=a=>e.isDialogOpen=a)},{default:h(()=>[t(B,{style:{"background-color":"#0E2741",color:"#0086f3"}},{default:h(()=>[t(V,{class:"text-center"},{default:h(()=>[Me,l("div",Pe,"Acertos: "+g(e.acertos)+" / "+g(e.prova.length),1),l("div",Se,[l("b",null,"Nota: "+g(e.nota.toFixed(1)),1)])]),_:1}),(m(!0),p(O,null,I(e.gabarito,(a,c)=>(m(),S(V,{key:c},{default:h(()=>[l("div",null,[l("b",null,"Quest\xE3o "+g(a.numero)+": "+g(a.resposta),1),a.erro?(m(),p("div",Qe,[Ve,Q(" "+g(a.comentario),1)])):E("",!0)])]),_:2},1024))),128)),t(le,{align:"right"},{default:h(()=>[t(C,{flat:"",label:"Imprimir",onClick:e.imprimirGabarito,color:"primary"},null,8,["onClick"]),K(t(C,{flat:"",label:"Fechar",color:"primary"},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Re=se(de,[["render",we],["__scopeId","data-v-7fe66918"]]);export{Re as default};
